<!DOCTYPE html>

<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>TERRA √ó COSMOS ‚Äî Multiplayer</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Mitr:wght@300;400;600&display=swap" rel="stylesheet">

<!-- Firebase -->

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getDatabase, ref, set, get, onValue, update, remove, push, serverTimestamp, off }
  from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyDGAXmqmbn4fV47eNXa8PSP4N_hIWxmsuE",
  authDomain: "space-race-game-d20ad.firebaseapp.com",
  databaseURL: "https://space-race-game-d20ad-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "space-race-game-d20ad",
  storageBucket: "space-race-game-d20ad.firebasestorage.app",
  messagingSenderId: "691384338211",
  appId: "1:691384338211:web:f17b92c8ff574daa012e96",
  measurementId: "G-0YV3DXD5RM"
};

const app = initializeApp(firebaseConfig);
const db  = getDatabase(app);

// ‚îÄ‚îÄ‚îÄ DATA ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const ITEMS = [
  {icon:'üåÄ',name:'‡πÄ‡∏≠‡∏•‡∏ô‡∏µ‡πÇ‡∏ç',hint:'El Ni√±o',zone:'earth',fact:'‡∏Å‡∏≤‡∏£‡∏≠‡∏∏‡πà‡∏ô‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥‡∏Ç‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡πÅ‡∏õ‡∏ã‡∏¥‡∏ü‡∏¥‡∏Å‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏≠‡∏≠‡∏Å ‡πÄ‡∏Å‡∏¥‡∏î‡πÉ‡∏ô‡∏°‡∏´‡∏≤‡∏™‡∏°‡∏∏‡∏ó‡∏£‡πÇ‡∏•‡∏Å'},
  {icon:'üåä',name:'‡∏•‡∏≤‡∏ô‡∏µ‡∏ç‡∏≤',hint:'La Ni√±a',zone:'earth',fact:'‡∏ô‡πâ‡∏≥‡πÅ‡∏õ‡∏ã‡∏¥‡∏ü‡∏¥‡∏Å‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏ï‡∏Å‡∏≠‡∏∏‡πà‡∏ô‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ ‡πÄ‡∏Å‡∏¥‡∏î‡πÉ‡∏ô‡∏°‡∏´‡∏≤‡∏™‡∏°‡∏∏‡∏ó‡∏£‡πÇ‡∏•‡∏Å'},
  {icon:'üß´',name:'Tardigrade',hint:'‡∏™‡∏±‡∏ï‡∏ß‡πå 8 ‡∏Ç‡∏≤‡∏ï‡∏±‡∏ß‡∏à‡∏¥‡πã‡∏ß‡∏ó‡∏ô‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á',zone:'earth',fact:'‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏à‡∏¥‡πã‡∏ß‡∏ö‡∏ô‡πÇ‡∏•‡∏Å‡∏ó‡∏µ‡πà‡∏ó‡∏ô‡∏™‡∏∏‡∏ç‡∏ç‡∏≤‡∏Å‡∏≤‡∏®‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏á‡∏™‡∏µ‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏≠‡∏≤‡∏®‡∏±‡∏¢‡∏ö‡∏ô‡πÇ‡∏•‡∏Å'},
  {icon:'ü¶†',name:'Archaea',hint:'‡∏à‡∏∏‡∏•‡∏¥‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡πå‡πÇ‡∏ö‡∏£‡∏≤‡∏ì‡∏™‡∏∏‡∏î‡∏Ç‡∏µ‡∏î',zone:'earth',fact:'‡∏™‡∏¥‡πà‡∏á‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡πÉ‡∏ô‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á‡∏ö‡∏ô‡πÇ‡∏•‡∏Å ‡πÄ‡∏ä‡πà‡∏ô ‡∏õ‡∏•‡πà‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡∏£‡πâ‡∏≠‡∏ô'},
  {icon:'üåã',name:'Subduction Zone',hint:'‡πÅ‡∏ú‡πà‡∏ô‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏•‡∏Å‡∏à‡∏°‡∏•‡∏á',zone:'earth',fact:'‡πÄ‡∏Ç‡∏ï‡∏°‡∏∏‡∏î‡∏ï‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏•‡∏Å ‡πÄ‡∏Å‡∏¥‡∏î‡πÅ‡∏ú‡πà‡∏ô‡∏î‡∏¥‡∏ô‡πÑ‡∏´‡∏ß‡πÅ‡∏•‡∏∞‡∏†‡∏π‡πÄ‡∏Ç‡∏≤‡πÑ‡∏ü'},
  {icon:'üíß',name:'Halocline',hint:'‡∏ä‡∏±‡πâ‡∏ô‡∏ô‡πâ‡∏≥‡∏ó‡∏∞‡πÄ‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ñ‡πá‡∏°‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏â‡∏±‡∏ö‡∏û‡∏•‡∏±‡∏ô',zone:'earth',fact:'‡∏ä‡∏±‡πâ‡∏ô‡πÉ‡∏ô‡∏°‡∏´‡∏≤‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ñ‡πá‡∏°‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∂‡∏Å'},
  {icon:'üíß',name:'Thermocline',hint:'‡∏ä‡∏±‡πâ‡∏ô‡∏ô‡πâ‡∏≥‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏â‡∏±‡∏ö‡∏û‡∏•‡∏±‡∏ô',zone:'earth',fact:'‡∏ä‡∏±‡πâ‡∏ô‡∏°‡∏´‡∏≤‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏ó‡∏µ‡πà‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏•‡∏î‡∏Æ‡∏ß‡∏ö ‡πÄ‡∏Å‡∏¥‡∏î‡πÉ‡∏ô‡∏ó‡∏∞‡πÄ‡∏•‡∏•‡∏∂‡∏Å‡∏ö‡∏ô‡πÇ‡∏•‡∏Å'},
  {icon:'üåÄ',name:'Polar Vortex',hint:'‡∏ß‡∏±‡∏á‡∏ß‡∏ô‡∏•‡∏°‡πÄ‡∏¢‡πá‡∏ô‡∏à‡∏±‡∏î‡∏Ç‡∏±‡πâ‡∏ß‡πÇ‡∏•‡∏Å',zone:'earth',fact:'‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏°‡∏û‡∏≤‡∏¢‡∏∏‡∏´‡∏°‡∏∏‡∏ô‡∏£‡∏≠‡∏ö‡∏Ç‡∏±‡πâ‡∏ß‡πÇ‡∏•‡∏Å‡πÉ‡∏ô‡∏ä‡∏±‡πâ‡∏ô‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡πÇ‡∏•‡∏Å'},
  {icon:'üå±',name:'Chemosynthesis',hint:'‡∏™‡∏±‡∏á‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏°‡∏µ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÅ‡∏™‡∏á',zone:'earth',fact:'‡πÅ‡∏ö‡∏Ñ‡∏ó‡∏µ‡πÄ‡∏£‡∏µ‡∏¢‡πÉ‡∏ï‡πâ‡∏ó‡∏∞‡πÄ‡∏•‡∏•‡∏∂‡∏Å‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ‡πÅ‡∏ó‡∏ô‡πÅ‡∏™‡∏á‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå ‡∏û‡∏ö‡∏ó‡∏µ‡πà‡∏õ‡∏•‡πà‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡∏£‡πâ‡∏≠‡∏ô'},
  {icon:'üèîÔ∏è',name:'Isostasy',hint:'‡∏™‡∏°‡∏î‡∏∏‡∏•‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏•‡∏Å‡πÉ‡∏ô mantle',zone:'earth',fact:'‡∏™‡∏°‡∏î‡∏∏‡∏•‡∏Ç‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏•‡∏Å‡∏ó‡∏µ‡πà‡∏•‡∏≠‡∏¢‡∏ö‡∏ô‡∏ä‡∏±‡πâ‡∏ô mantle ‡πÄ‡∏´‡∏•‡∏ß'},
  {icon:'üî•',name:'Kimberlite',hint:'‡∏´‡∏¥‡∏ô‡πÅ‡∏°‡∏Å‡∏°‡∏≤‡∏û‡∏≤‡πÄ‡∏û‡∏ä‡∏£‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤',zone:'earth',fact:'‡∏´‡∏¥‡∏ô‡∏†‡∏π‡πÄ‡∏Ç‡∏≤‡πÑ‡∏ü‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∂‡∏Å 200 ‡∏Å‡∏°. ‡∏û‡∏≤‡πÄ‡∏û‡∏ä‡∏£‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏¢‡∏±‡∏á‡∏ú‡∏¥‡∏ß‡πÇ‡∏•‡∏Å'},
  {icon:'üßä',name:'Permafrost',hint:'‡∏î‡∏¥‡∏ô‡πÅ‡∏Ç‡πá‡∏á‡∏ï‡∏•‡∏≠‡∏î‡∏õ‡∏µ‡πÉ‡∏ô‡πÄ‡∏Ç‡∏ï‡∏´‡∏ô‡∏≤‡∏ß',zone:'earth',fact:'‡∏î‡∏¥‡∏ô‡πÅ‡∏ä‡πà‡πÅ‡∏Ç‡πá‡∏á‡∏ñ‡∏≤‡∏ß‡∏£‡πÉ‡∏ï‡πâ‡∏û‡∏∑‡πâ‡∏ô‡∏ú‡∏¥‡∏ß‡πÉ‡∏ô‡πÄ‡∏Ç‡∏ï‡∏≠‡∏≤‡∏£‡πå‡∏Å‡∏ï‡∏¥‡∏Å‡πÅ‡∏•‡∏∞‡πÅ‡∏≠‡∏ô‡∏ï‡∏≤‡∏£‡πå‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤'},
  {icon:'üí®',name:'Jet Stream',hint:'‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡∏•‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏™‡∏π‡∏á‡πÉ‡∏ô‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®',zone:'earth',fact:'‡∏•‡∏°‡πÅ‡∏£‡∏á‡πÉ‡∏ô‡∏ä‡∏±‡πâ‡∏ô tropopause ‡πÇ‡∏•‡∏Å ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß 100-400 ‡∏Å‡∏°./‡∏ä‡∏°.'},
  {icon:'üåà',name:'Bioluminescence',hint:'‡∏™‡∏¥‡πà‡∏á‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡πÄ‡∏£‡∏∑‡∏≠‡∏á‡πÅ‡∏™‡∏á‡πÑ‡∏î‡πâ',zone:'earth',fact:'‡πÅ‡∏°‡∏á‡∏Å‡∏∞‡∏û‡∏£‡∏∏‡∏ô ‡∏´‡∏¥‡πà‡∏á‡∏´‡πâ‡∏≠‡∏¢ ‡∏õ‡∏•‡∏≤‡∏ó‡∏∞‡πÄ‡∏•‡∏•‡∏∂‡∏Å ‡∏•‡πâ‡∏ß‡∏ô‡πÄ‡∏£‡∏∑‡∏≠‡∏á‡πÅ‡∏™‡∏á‡∏ö‡∏ô‡πÇ‡∏•‡∏Å'},
  {icon:'ü´ß',name:'Methane Hydrate',hint:'‡∏Å‡πä‡∏≤‡∏ã‡πÅ‡∏ä‡πà‡πÅ‡∏Ç‡πá‡∏á‡πÉ‡∏ï‡πâ‡∏ó‡∏∞‡πÄ‡∏•‡∏•‡∏∂‡∏Å',zone:'earth',fact:'‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏±‡∏Å‡πÄ‡∏Å‡πá‡∏ö‡∏Å‡πä‡∏≤‡∏ã‡∏°‡∏µ‡πÄ‡∏ó‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ï‡πâ‡∏ó‡∏∞‡πÄ‡∏•‡∏•‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡∏Ç‡∏±‡πâ‡∏ß‡πÇ‡∏•‡∏Å'},
  {icon:'üåÄ',name:'ENSO Cycle',hint:'‡∏ß‡∏á‡∏à‡∏£‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏°‡∏´‡∏≤‡∏™‡∏°‡∏∏‡∏ó‡∏£‡πÅ‡∏õ‡∏ã‡∏¥‡∏ü‡∏¥‡∏Å',zone:'earth',fact:'El Ni√±o-Southern Oscillation ‡∏ß‡∏á‡∏à‡∏£‡∏≠‡∏≤‡∏Å‡∏≤‡∏®-‡∏°‡∏´‡∏≤‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏ö‡∏ô‡πÇ‡∏•‡∏Å'},
  {icon:'üå™Ô∏è',name:'Atmospheric River',hint:'‡πÅ‡∏°‡πà‡∏ô‡πâ‡∏≥‡πÉ‡∏ô‡∏ä‡∏±‡πâ‡∏ô‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®',zone:'earth',fact:'‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡πÑ‡∏≠‡∏ô‡πâ‡∏≥‡πÉ‡∏ô‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡πÇ‡∏•‡∏Å‡∏ó‡∏µ‡πà‡∏û‡∏≤‡∏ù‡∏ô‡∏°‡∏´‡∏≤‡∏®‡∏≤‡∏• ‡πÄ‡∏ä‡πà‡∏ô Pineapple Express'},
  {icon:'‚ö°',name:'Ball Lightning',hint:'‡∏ü‡πâ‡∏≤‡∏ú‡πà‡∏≤‡∏ó‡∏£‡∏á‡∏Å‡∏•‡∏°‡∏•‡∏∂‡∏Å‡∏•‡∏±‡∏ö',zone:'earth',fact:'‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏•‡∏∂‡∏Å‡∏•‡∏±‡∏ö‡πÉ‡∏ô‡∏ä‡∏±‡πâ‡∏ô‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡πÇ‡∏•‡∏Å ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÅ‡∏ô‡πà‡∏ä‡∏±‡∏î'},
  {icon:'üåä',name:'Rogue Wave',hint:'‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡∏¢‡∏±‡∏Å‡∏©‡πå‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥‡∏Å‡∏•‡∏≤‡∏á‡∏ó‡∏∞‡πÄ‡∏•',zone:'earth',fact:'‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡∏ó‡∏∞‡πÄ‡∏•‡∏™‡∏π‡∏á 25+ ‡πÄ‡∏°‡∏ï‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏•‡∏≤‡∏á‡∏°‡∏´‡∏≤‡∏™‡∏°‡∏∏‡∏ó‡∏£'},
  {icon:'üß≤',name:'Magnetosphere',hint:'‡∏™‡∏ô‡∏≤‡∏°‡πÅ‡∏°‡πà‡πÄ‡∏´‡∏•‡πá‡∏Å‡∏´‡πà‡∏≠‡∏´‡∏∏‡πâ‡∏°‡πÇ‡∏•‡∏Å',zone:'earth',fact:'‡∏™‡∏ô‡∏≤‡∏°‡πÅ‡∏°‡πà‡πÄ‡∏´‡∏•‡πá‡∏Å‡∏Ç‡∏≠‡∏á‡πÇ‡∏•‡∏Å‡∏ó‡∏µ‡πà‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏£‡∏±‡∏á‡∏™‡∏µ‡∏à‡∏≤‡∏Å‡∏î‡∏ß‡∏á‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå'},
  {icon:'üåÄ',name:'Coriolis Effect',hint:'‡πÅ‡∏£‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏û‡∏≤‡∏¢‡∏∏‡∏´‡∏°‡∏∏‡∏ô‡∏Å‡∏•‡∏°',zone:'earth',fact:'‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô‡∏Ç‡∏≠‡∏á‡πÇ‡∏•‡∏Å ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏•‡∏°‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡∏ô‡πâ‡∏≥‡∏´‡∏°‡∏∏‡∏ô‡∏ó‡∏¥‡∏®‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô'},
  {icon:'üí°',name:'Aurora Borealis',hint:'‡πÅ‡∏™‡∏á‡πÄ‡∏´‡∏ô‡∏∑‡∏≠',zone:'earth',fact:'‡πÄ‡∏Å‡∏¥‡∏î‡πÉ‡∏ô‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡πÇ‡∏•‡∏Å ‡∏à‡∏≤‡∏Å‡∏≠‡∏ô‡∏∏‡∏†‡∏≤‡∏Ñ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏à‡∏≤‡∏Å‡∏î‡∏ß‡∏á‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå‡∏ä‡∏ô‡∏Å‡πä‡∏≤‡∏ã'},
  {icon:'üî•',name:'Volcanic Lightning',hint:'‡∏ü‡πâ‡∏≤‡∏ú‡πà‡∏≤‡πÉ‡∏ô‡πÄ‡∏°‡∏Ü‡∏Ñ‡∏ß‡∏±‡∏ô‡∏†‡∏π‡πÄ‡∏Ç‡∏≤‡πÑ‡∏ü',zone:'earth',fact:'‡πÄ‡∏Å‡∏¥‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏ñ‡πâ‡∏≤‡∏ñ‡πà‡∏≤‡∏ô‡∏†‡∏π‡πÄ‡∏Ç‡∏≤‡πÑ‡∏ü ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡∏∞‡∏™‡∏°‡∏õ‡∏£‡∏∞‡∏à‡∏∏‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏™‡∏ñ‡∏¥‡∏ï'},
  {icon:'üêç',name:'Mycorrhizal Network',hint:'‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏£‡∏≤‡πÉ‡∏ï‡πâ‡∏î‡∏¥‡∏ô',zone:'earth',fact:'‡πÄ‡∏™‡πâ‡∏ô‡πÉ‡∏¢‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏£‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏£‡∏≤‡∏Å‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Å‡∏±‡∏ô'},
  {icon:'üåä',name:'Turbidite',hint:'‡∏ï‡∏∞‡∏Å‡∏≠‡∏ô‡πÉ‡∏ï‡πâ‡∏ô‡πâ‡∏≥‡πÑ‡∏´‡∏•‡∏´‡∏ô‡∏≤‡πÅ‡∏ô‡πà‡∏ô',zone:'earth',fact:'‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡∏ï‡∏∞‡∏Å‡∏≠‡∏ô‡πÉ‡∏ï‡πâ‡∏ô‡πâ‡∏≥‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏•‡πÄ‡∏£‡πá‡∏ß‡∏à‡∏°‡∏•‡∏á‡πÑ‡∏õ‡∏Å‡πâ‡∏ô‡∏ó‡∏∞‡πÄ‡∏•'},
  {icon:'üï≥Ô∏è',name:'Quasar',hint:'‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏≤‡∏•',zone:'space',fact:'‡∏ô‡∏¥‡∏ß‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏™‡∏Å‡∏≤‡πÅ‡∏•‡πá‡∏Å‡∏ã‡∏µ‡∏™‡∏ß‡πà‡∏≤‡∏á‡∏°‡∏≤‡∏Å ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏à‡∏≤‡∏Å‡∏´‡∏•‡∏∏‡∏°‡∏î‡∏≥‡∏°‡∏ß‡∏•‡∏¢‡∏¥‡πà‡∏á‡∏¢‡∏ß‡∏î‡∏Å‡∏•‡∏∑‡∏ô‡∏™‡∏™‡∏≤‡∏£'},
  {icon:'üí´',name:'Magnetar',hint:'‡∏î‡∏≤‡∏ß‡∏ô‡∏¥‡∏ß‡∏ï‡∏£‡∏≠‡∏ô‡∏™‡∏ô‡∏≤‡∏°‡πÅ‡∏°‡πà‡πÄ‡∏´‡∏•‡πá‡∏Å‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î',zone:'space',fact:'‡∏î‡∏≤‡∏ß‡∏ô‡∏¥‡∏ß‡∏ï‡∏£‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏™‡∏ô‡∏≤‡∏°‡πÅ‡∏°‡πà‡πÄ‡∏´‡∏•‡πá‡∏Å‡πÅ‡∏£‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏≤‡∏• ‡πÅ‡∏£‡∏á‡∏Å‡∏ß‡πà‡∏≤‡πÇ‡∏•‡∏Å 1 ‡∏•‡πâ‡∏≤‡∏ô‡∏•‡πâ‡∏≤‡∏ô‡πÄ‡∏ó‡πà‡∏≤'},
  {icon:'‚òÑÔ∏è',name:'Oort Cloud',hint:'‡πÄ‡∏°‡∏Ü‡∏î‡∏≤‡∏ß‡∏´‡∏≤‡∏á‡∏´‡πà‡∏≤‡∏á‡πÑ‡∏Å‡∏•‡∏™‡∏∏‡∏î',zone:'space',fact:'‡∏ä‡∏±‡πâ‡∏ô‡∏ô‡∏≠‡∏Å‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏∏‡∏£‡∏¥‡∏¢‡∏∞ ‡∏≠‡∏¢‡∏π‡πà‡∏´‡πà‡∏≤‡∏á 2,000-100,000 AU ‡πÅ‡∏´‡∏•‡πà‡∏á‡∏Å‡∏≥‡πÄ‡∏ô‡∏¥‡∏î‡∏î‡∏≤‡∏ß‡∏´‡∏≤‡∏á'},
  {icon:'üåÄ',name:'Accretion Disk',hint:'‡∏à‡∏≤‡∏ô‡∏™‡∏™‡∏≤‡∏£‡∏£‡∏≠‡∏ö‡∏´‡∏•‡∏∏‡∏°‡∏î‡∏≥',zone:'space',fact:'‡∏à‡∏≤‡∏ô‡∏™‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ß‡∏ô‡∏£‡∏≠‡∏ö‡∏´‡∏•‡∏∏‡∏°‡∏î‡∏≥ ‡∏£‡πâ‡∏≠‡∏ô‡∏°‡∏≤‡∏Å‡∏à‡∏ô‡πÄ‡∏õ‡∏•‡πà‡∏á‡πÅ‡∏™‡∏á‡πÄ‡∏≠‡πá‡∏Å‡∏ã‡πå‡πÄ‡∏£‡∏¢‡πå'},
  {icon:'üî≠',name:'Wolf-Rayet Star',hint:'‡∏î‡∏≤‡∏ß‡∏§‡∏Å‡∏©‡πå‡πÉ‡∏Å‡∏•‡πâ‡∏™‡∏¥‡πâ‡∏ô‡∏≠‡∏≤‡∏¢‡∏∏‡∏Ç‡∏±‡∏¢',zone:'space',fact:'‡∏î‡∏≤‡∏ß‡∏§‡∏Å‡∏©‡πå‡∏°‡∏´‡∏∂‡∏°‡∏≤‡∏ó‡∏µ‡πà‡∏û‡πà‡∏ô‡∏ä‡∏±‡πâ‡∏ô‡∏ô‡∏≠‡∏Å‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î Supernova'},
  {icon:'üåå',name:'Interstellar Medium',hint:'‡∏™‡∏™‡∏≤‡∏£‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏î‡∏≤‡∏ß',zone:'space',fact:'‡∏Å‡πä‡∏≤‡∏ã‡πÅ‡∏•‡∏∞‡∏ù‡∏∏‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏ï‡πá‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏î‡∏≤‡∏ß‡πÉ‡∏ô‡∏Å‡∏≤‡πÅ‡∏•‡πá‡∏Å‡∏ã‡∏µ'},
  {icon:'‚ö°',name:'Gamma-Ray Burst',hint:'‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏≤‡∏•',zone:'space',fact:'‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏î‡∏≤‡∏ß‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î hypernova ‡∏´‡∏£‡∏∑‡∏≠‡∏î‡∏≤‡∏ß‡∏ô‡∏¥‡∏ß‡∏ï‡∏£‡∏≠‡∏ô‡∏ä‡∏ô‡∏Å‡∏±‡∏ô'},
  {icon:'üåÄ',name:'Pulsar',hint:'‡∏î‡∏≤‡∏ß‡∏ô‡∏¥‡∏ß‡∏ï‡∏£‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡∏ß‡∏¥‡∏ó‡∏¢‡∏∏‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞',zone:'space',fact:'‡∏î‡∏≤‡∏ß‡∏ô‡∏¥‡∏ß‡∏ï‡∏£‡∏≠‡∏ô‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏µ‡πà‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏•‡∏≥‡πÅ‡∏™‡∏á‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡∏ß‡∏¥‡∏ó‡∏¢‡∏∏‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠'},
  {icon:'üåä',name:'Gravitational Wave',hint:'‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡πÉ‡∏ô‡∏ú‡∏∑‡∏ô‡∏Å‡∏≤‡∏•‡∏≠‡∏ß‡∏Å‡∏≤‡∏®',zone:'space',fact:'‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡πÉ‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏•‡∏≠‡∏ß‡∏Å‡∏≤‡∏® ‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ä‡∏ô‡∏Ç‡∏≠‡∏á‡∏´‡∏•‡∏∏‡∏°‡∏î‡∏≥‡∏´‡∏£‡∏∑‡∏≠‡∏î‡∏≤‡∏ß‡∏ô‡∏¥‡∏ß‡∏ï‡∏£‡∏≠‡∏ô'},
  {icon:'‚ùÑÔ∏è',name:'Cosmic Microwave Background',hint:'‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏à‡∏≤‡∏Å Big Bang',zone:'space',fact:'‡∏£‡∏±‡∏á‡∏™‡∏µ‡πÑ‡∏°‡πÇ‡∏Ñ‡∏£‡πÄ‡∏ß‡∏ü‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏à‡∏≤‡∏Å Big Bang ‡πÄ‡∏°‡∏∑‡πà‡∏≠ 380,000 ‡∏õ‡∏µ‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏≥‡πÄ‡∏ô‡∏¥‡∏î‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏≤‡∏•'},
  {icon:'ü™ê',name:'Roche Limit',hint:'‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏µ‡πà‡∏î‡∏≤‡∏ß‡∏ö‡∏£‡∏¥‡∏ß‡∏≤‡∏£‡∏ñ‡∏π‡∏Å‡πÅ‡∏£‡∏á‡∏ô‡πâ‡∏≥‡∏Ç‡∏∂‡πâ‡∏ô‡∏•‡∏á‡∏ó‡∏≥‡∏•‡∏≤‡∏¢',zone:'space',fact:'‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏ó‡∏µ‡πà‡∏î‡∏ß‡∏á‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡πÅ‡∏£‡∏á‡∏ô‡πâ‡∏≥‡∏Ç‡∏∂‡πâ‡∏ô‡∏•‡∏á‡∏â‡∏µ‡∏Å‡∏ó‡∏≥‡∏•‡∏≤‡∏¢'},
  {icon:'üåë',name:'Dark Matter',hint:'‡∏™‡∏™‡∏≤‡∏£‡∏°‡∏∑‡∏î‡∏ó‡∏µ‡πà‡∏î‡∏∂‡∏á‡∏î‡∏π‡∏î‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡πà‡∏á‡πÅ‡∏™‡∏á',zone:'space',fact:'‡∏™‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÅ‡∏£‡∏á‡πÇ‡∏ô‡πâ‡∏°‡∏ñ‡πà‡∏ß‡∏á‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏è‡∏¥‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ö‡πÅ‡∏™‡∏á ~27% ‡∏Ç‡∏≠‡∏á‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏≤‡∏•'},
  {icon:'‚ö´',name:'Spaghettification',hint:'‡∏¢‡∏∑‡∏î‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏™‡πâ‡∏ô‡∏™‡∏õ‡∏≤‡πÄ‡∏Å‡πá‡∏ï‡∏ï‡∏µ‡πâ‡πÉ‡∏Å‡∏•‡πâ‡∏´‡∏•‡∏∏‡∏°‡∏î‡∏≥',zone:'space',fact:'‡πÅ‡∏£‡∏á‡πÇ‡∏ô‡πâ‡∏°‡∏ñ‡πà‡∏ß‡∏á‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏™‡∏™‡∏≤‡∏£‡∏¢‡∏∑‡∏î‡∏≠‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏™‡πâ‡∏ô'},
  {icon:'üåå',name:'Laniakea Supercluster',hint:'‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ã‡∏∏‡∏õ‡πÄ‡∏õ‡∏≠‡∏£‡πå‡∏Ñ‡∏•‡∏±‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡πÇ‡∏•‡∏Å‡∏≠‡∏¢‡∏π‡πà',zone:'space',fact:'‡∏ã‡∏∏‡∏õ‡πÄ‡∏õ‡∏≠‡∏£‡πå‡∏Ñ‡∏•‡∏±‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏Å‡∏≤‡πÅ‡∏•‡πá‡∏Å‡∏ã‡∏µ‡∏ó‡∏µ‡πà‡∏ó‡∏≤‡∏á‡∏ä‡πâ‡∏≤‡∏á‡πÄ‡∏ú‡∏∑‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å ‡∏Ç‡∏ô‡∏≤‡∏î 520 ‡∏•‡πâ‡∏≤‡∏ô‡∏õ‡∏µ‡πÅ‡∏™‡∏á'},
  {icon:'üîÆ',name:'Hawking Radiation',hint:'‡∏£‡∏±‡∏á‡∏™‡∏µ‡∏à‡∏≤‡∏Å‡∏´‡∏•‡∏∏‡∏°‡∏î‡∏≥‡∏ï‡∏≤‡∏°‡∏ó‡∏§‡∏©‡∏é‡∏µ‡∏Æ‡∏≠‡∏ß‡πå‡∏Å‡∏¥‡πâ‡∏á',zone:'space',fact:'‡∏£‡∏±‡∏á‡∏™‡∏µ‡∏ó‡∏µ‡πà‡∏ó‡∏§‡∏©‡∏é‡∏µ‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏ß‡πà‡∏≤‡∏´‡∏•‡∏∏‡∏°‡∏î‡∏≥‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏≠‡∏≠‡∏Å‡∏°‡∏≤ ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡∏∞‡πÄ‡∏´‡∏¢‡∏´‡∏≤‡∏¢‡πÉ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏≤‡∏ß'},
  {icon:'üå†',name:'Trojan Asteroid',hint:'‡∏î‡∏≤‡∏ß‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ô‡πâ‡∏≠‡∏¢‡πÉ‡∏ô‡∏à‡∏∏‡∏î Lagrange',zone:'space',fact:'‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏î‡∏≤‡∏ß‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ô‡πâ‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏à‡∏∏‡∏î Lagrange ‡∏Ç‡∏≠‡∏á‡∏î‡∏≤‡∏ß‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ'},
  {icon:'üí•',name:'Hypernova',hint:'Supernova ‡πÅ‡∏ï‡πà‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á 100 ‡πÄ‡∏ó‡πà‡∏≤',zone:'space',fact:'‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î‡∏Ç‡∏≠‡∏á‡∏î‡∏≤‡∏ß‡∏§‡∏Å‡∏©‡πå‡∏°‡∏ß‡∏•‡∏°‡∏≤‡∏Å‡∏û‡∏¥‡πÄ‡∏®‡∏© ‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á‡∏Å‡∏ß‡πà‡∏≤ Supernova ‡∏°‡∏≤‡∏Å'},
  {icon:'üîµ',name:'Blazar',hint:'Quasar ‡∏ó‡∏µ‡πà jet ‡∏¢‡∏¥‡∏á‡∏ï‡∏£‡∏á‡∏°‡∏≤‡∏´‡∏≤‡πÄ‡∏£‡∏≤',zone:'space',fact:'Quasar ‡∏ó‡∏µ‡πà jet ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏™‡∏π‡∏á‡∏¢‡∏¥‡∏á‡∏ï‡∏£‡∏á‡∏°‡∏≤‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á‡πÇ‡∏•‡∏Å ‡∏î‡∏π‡∏™‡∏ß‡πà‡∏≤‡∏á‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥'},
  {icon:'üåë',name:'Exoplanet',hint:'‡∏î‡∏≤‡∏ß‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ô‡∏≠‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏∏‡∏£‡∏¥‡∏¢‡∏∞',zone:'space',fact:'‡∏î‡∏≤‡∏ß‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ó‡∏µ‡πà‡πÇ‡∏Ñ‡∏à‡∏£‡∏£‡∏≠‡∏ö‡∏î‡∏≤‡∏ß‡∏§‡∏Å‡∏©‡πå‡∏î‡∏ß‡∏á‡∏≠‡∏∑‡πà‡∏ô ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏î‡∏ß‡∏á‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤'},
  {icon:'üí®',name:'Solar Wind',hint:'‡∏•‡∏°‡∏à‡∏≤‡∏Å‡∏î‡∏ß‡∏á‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå',zone:'space',fact:'‡∏≠‡∏ô‡∏∏‡∏†‡∏≤‡∏Ñ‡∏ó‡∏µ‡πà‡∏û‡πà‡∏ô‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏î‡∏ß‡∏á‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå ‡πÑ‡∏´‡∏•‡∏≠‡∏≠‡∏Å‡∏™‡∏π‡πà‡∏≠‡∏ß‡∏Å‡∏≤‡∏®'},
  {icon:'üåÄ',name:'Void / Supervoid',hint:'‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤‡πÉ‡∏ô‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏≤‡∏•',zone:'space',fact:'‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡πÉ‡∏ô‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏≤‡∏•‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡∏ö‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡πÅ‡∏•‡πá‡∏Å‡∏ã‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏•‡∏¢ ‡πÉ‡∏´‡∏ç‡πà‡∏Å‡∏ß‡πà‡∏≤ 300 ‡∏•‡πâ‡∏≤‡∏ô‡∏õ‡∏µ‡πÅ‡∏™‡∏á'},
  {icon:'ü™®',name:'Chondrule',hint:'‡πÄ‡∏°‡πá‡∏î‡∏´‡∏¥‡∏ô‡∏Å‡∏•‡∏°‡πÉ‡∏ô‡∏≠‡∏∏‡∏Å‡∏Å‡∏≤‡∏ö‡∏≤‡∏ï',zone:'space',fact:'‡πÄ‡∏°‡πá‡∏î‡∏´‡∏¥‡∏ô‡∏Å‡∏•‡∏°‡∏à‡∏¥‡πã‡∏ß‡πÉ‡∏ô‡∏≠‡∏∏‡∏Å‡∏Å‡∏≤‡∏ö‡∏≤‡∏ï ‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏≠‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÉ‡∏ô‡πÄ‡∏ô‡∏ö‡∏¥‡∏ß‡∏•‡∏≤‡∏¢‡∏∏‡∏Ñ‡πÅ‡∏£‡∏Å'},
  {icon:'üßä',name:'Kuiper Belt Object',hint:'‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡πÉ‡∏ô‡πÅ‡∏ñ‡∏ö‡πÑ‡∏Ñ‡πÄ‡∏õ‡∏≠‡∏£‡πå',zone:'space',fact:'‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏´‡∏•‡∏±‡∏á‡∏î‡∏≤‡∏ß‡πÄ‡∏ô‡∏õ‡∏à‡∏π‡∏ô ‡∏£‡∏∞‡∏¢‡∏∞ 30-50 AU ‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á‡∏û‡∏•‡∏π‡πÇ‡∏ï‡∏î‡πâ‡∏ß‡∏¢'},
  {icon:'‚öõÔ∏è',name:'Nucleosynthesis',hint:'‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ò‡∏≤‡∏ï‡∏∏‡πÉ‡∏ô‡∏î‡∏≤‡∏ß‡∏§‡∏Å‡∏©‡πå',zone:'space',fact:'‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ò‡∏≤‡∏ï‡∏∏‡∏´‡∏ô‡∏±‡∏Å‡πÉ‡∏ô‡πÅ‡∏Å‡∏ô‡∏î‡∏≤‡∏ß‡∏§‡∏Å‡∏©‡πå‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Supernova'},
  {icon:'üåä',name:'Tidal Locking',hint:'‡∏î‡∏ß‡∏á‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡∏´‡∏±‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏î‡πâ‡∏≤‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡∏´‡∏≤‡πÇ‡∏•‡∏Å',zone:'space',fact:'‡∏î‡∏ß‡∏á‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡∏´‡∏°‡∏∏‡∏ô‡∏£‡∏≠‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏ä‡πâ‡∏≤‡∏û‡∏≠‡∏î‡∏µ‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡πà‡πÇ‡∏Ñ‡∏à‡∏£‡∏£‡∏≠‡∏ö‡πÇ‡∏•‡∏Å'},
];

const POWER_UPS = [
  {id:'freeze',icon:'üßä',name:'‡∏ü‡∏£‡∏µ‡∏ã',desc:'‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô 3 ‡∏ß‡∏¥',color:'#4dd9f0'},
  {id:'swap',icon:'üîÑ',name:'‡∏™‡∏•‡∏±‡∏ö',desc:'‡∏™‡∏•‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô 1 ‡∏Ç‡πâ‡∏≠',color:'#f1c40f'},
  {id:'blind',icon:'üëÅÔ∏è',name:'‡∏ö‡∏≠‡∏î',desc:'‡∏ã‡πà‡∏≠‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô 1 ‡∏Ç‡πâ‡∏≠',color:'#e74c3c'},
];

// ‚îÄ‚îÄ‚îÄ STATE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let myId = 'p_' + Math.random().toString(36).slice(2,8);
let myName = '';
let roomCode = '';
let isHost = false;
let roomRef = null;
let listeners = [];
let gameQueue = [];
let currentRound = 0;
let myScore = 0;
let myPowerUps = {freeze:1, swap:1, blind:1};
let roundAnswered = false;
let transitioning = false;
let frozenUntil = 0;
let swappedThisRound = false;
let blindThisRound = false;
let timerInt = null;
let timeLeft = 8;
let confettiInterval = null;

const TOTAL_ROUNDS = 15;

// ‚îÄ‚îÄ‚îÄ HELPERS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function shuffle(a){return [...a].sort(()=>Math.random()-.5)}
function genCode(){return Math.floor(1000+Math.random()*9000).toString()}

function listenDb(path, cb){
  const r = ref(db, path);
  onValue(r, cb);
  listeners.push({ref:r, cb});
  return r;
}
function stopListeners(){
  listeners.forEach(l => off(l.ref, 'value', l.cb));
  listeners = [];
}

// ‚îÄ‚îÄ‚îÄ UI HELPERS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const $ = id => document.getElementById(id);
function show(id){ $(id).style.display = 'flex' }
function hide(id){ $(id).style.display = 'none' }
function setScreen(s){
  ['screen-home','screen-lobby','screen-game','screen-result'].forEach(x => hide(x));
  show('screen-'+s);
}

function showToast(msg, color='#fff', dur=2200){
  const t = $('toast');
  t.textContent = msg;
  t.style.color = color;
  t.classList.add('show');
  setTimeout(()=>t.classList.remove('show'), dur);
}

function spawnParticles(x,y,color){
  for(let i=0;i<12;i++){
    const p=document.createElement('div');
    p.className='particle';
    const angle=(i/12)*Math.PI*2, dist=45+Math.random()*55;
    p.style.cssText=`left:${x}px;top:${y}px;width:${5+Math.random()*7}px;
      height:${5+Math.random()*7}px;background:${color};
      --tx:${Math.cos(angle)*dist}px;--ty:${Math.sin(angle)*dist}px;`;
    document.body.appendChild(p);
    setTimeout(()=>p.remove(),900);
  }
}

// ‚îÄ‚îÄ‚îÄ CANVAS STARS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const canvas = $('stars');
const ctx = canvas.getContext('2d');
let stars=[];
function initStars(){
  canvas.width=innerWidth; canvas.height=innerHeight;
  stars=Array.from({length:160},()=>({
    x:Math.random()*innerWidth, y:Math.random()*innerHeight,
    r:Math.random()*1.4+.3, a:Math.random(), da:(Math.random()-.5)*.007
  }));
}
function drawStars(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  stars.forEach(s=>{
    s.a=Math.max(.05,Math.min(1,s.a+s.da));
    if(s.a<=.05||s.a>=1) s.da*=-1;
    ctx.globalAlpha=s.a; ctx.fillStyle='white';
    ctx.beginPath(); ctx.arc(s.x,s.y,s.r,0,Math.PI*2); ctx.fill();
  });
  ctx.globalAlpha=1; requestAnimationFrame(drawStars);
}
initStars(); drawStars();
window.addEventListener('resize',initStars);

// ‚îÄ‚îÄ‚îÄ HOME ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function createRoom(){
  myName = $('inp-name').value.trim();
  if(!myName){ showToast('‚ö†Ô∏è ‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞','#e74c3c'); return; }
  roomCode = genCode();
  isHost = true;
  joinRoomDB();
}

function joinRoom(){
  myName = $('inp-name').value.trim();
  const code = $('inp-code').value.trim();
  if(!myName){ showToast('‚ö†Ô∏è ‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞','#e74c3c'); return; }
  if(code.length!==4){ showToast('‚ö†Ô∏è ‡∏£‡∏´‡∏±‡∏™‡∏´‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏≠‡∏á 4 ‡∏´‡∏•‡∏±‡∏Å','#e74c3c'); return; }
  roomCode = code;
  isHost = false;
  joinRoomDB();
}

async function joinRoomDB(){
  roomRef = ref(db, 'rooms/'+roomCode);
  const snap = await get(roomRef);

  if(!snap.exists() && !isHost){
    showToast('‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏µ‡πâ','#e74c3c'); return;
  }

  // Write player entry
  await set(ref(db, `rooms/${roomCode}/players/${myId}`), {
    name: myName,
    score: 0,
    ready: false,
    powerUps: {freeze:1, swap:1, blind:1},
    effects: {}
  });

  // Host initializes room
  if(isHost){
    await update(ref(db, `rooms/${roomCode}`), {
      host: myId,
      status: 'lobby',
      round: 0,
      queue: shuffle(ITEMS).slice(0, TOTAL_ROUNDS).map(i=>({
        icon:i.icon, name:i.name, hint:i.hint, zone:i.zone, fact:i.fact
      }))
    });
    $('start-btn').style.display = 'flex';
  } else {
    $('start-btn').style.display = 'none';
  }

  $('room-code-display').textContent = roomCode;
  setScreen('lobby');
  listenLobby();
}

function listenLobby(){
  listenDb(`rooms/${roomCode}/players`, snap=>{
    const players = snap.val() || {};
    const list = $('player-list');
    list.innerHTML = '';
    Object.entries(players).forEach(([id, p])=>{
      const div = document.createElement('div');
      div.className = 'player-chip' + (id===myId?' me':'');
      div.innerHTML = `<span class="pchip-emoji">${getAvatar(id)}</span> ${p.name}${id===myId?' (‡∏Ñ‡∏∏‡∏ì)':''}`;
      list.appendChild(div);
    });
  });

  listenDb(`rooms/${roomCode}/status`, snap=>{
    if(snap.val()==='playing') startGameClient();
  });
}

function getAvatar(id){
  const a=['üöÄ','üåç','‚≠ê','üåô','‚òÑÔ∏è','üî≠','ü™ê','üí´'];
  let h=0; for(let c of id) h=(h<<5)-h+c.charCodeAt(0);
  return a[Math.abs(h)%a.length];
}

async function startGame(){
  if(!isHost) return;
  await update(ref(db, `rooms/${roomCode}`), {status:'playing', round:0, roundStart: Date.now()});
}

// ‚îÄ‚îÄ‚îÄ GAME ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function startGameClient(){
  stopListeners();
  setScreen('game');
  listenGame();
}

function listenGame(){
  // Listen round changes
  listenDb(`rooms/${roomCode}/round`, snap=>{
    const r = snap.val();
    if(r === null) return;
    currentRound = r;
    loadRound(r);
  });

  // Listen effects on me
  listenDb(`rooms/${roomCode}/players/${myId}/effects`, snap=>{
    const fx = snap.val() || {};
    const now = Date.now();
    if(fx.freeze && fx.freeze > now){
      frozenUntil = fx.freeze;
      showEffect('üßä ‡πÇ‡∏î‡∏ô‡∏ü‡∏£‡∏µ‡∏ã! ‡∏´‡∏¢‡∏∏‡∏î‡∏ô‡∏¥‡πà‡∏á...','#4dd9f0');
    }
    if(fx.swap){
      swappedThisRound = true;
      showEffect('üîÑ ‡πÇ‡∏î‡∏ô‡∏™‡∏•‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°!','#f1c40f');
    }
    if(fx.blind){
      blindThisRound = true;
      $('item-name').textContent = '???';
      showEffect('üëÅÔ∏è ‡πÇ‡∏î‡∏ô‡∏ö‡∏≠‡∏î! ‡∏î‡∏π‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å!','#e74c3c');
    }
  });

  // Listen scores for leaderboard
  listenDb(`rooms/${roomCode}/players`, snap=>{
    updateLeaderboard(snap.val()||{});
  });

  // Listen room end
  listenDb(`rooms/${roomCode}/status`, snap=>{
    if(snap.val()==='ended') showResult();
  });
}

async function loadRound(roundIdx){
  roundAnswered = false;
  transitioning = true;
  swappedThisRound = false;
  blindThisRound = false;
  clearInterval(timerInt);

  // Show transition overlay ‚Äî lock buttons
  showTransition(roundIdx);

  // Clear my effects
  await set(ref(db, `rooms/${roomCode}/players/${myId}/effects`), {});

  const snap = await get(ref(db, `rooms/${roomCode}/queue`));
  gameQueue = snap.val() || [];

  if(roundIdx >= gameQueue.length){
    if(isHost) await update(ref(db,`rooms/${roomCode}`),{status:'ended'});
    return;
  }

  const item = gameQueue[roundIdx];
  $('round-num').textContent = `${roundIdx+1}/${gameQueue.length}`;

  // Wait 2s showing transition, then reveal question
  setTimeout(()=>{
    hideTransition();
    transitioning = false;

    $('item-icon').textContent = item.icon;
    $('item-name').textContent = item.name;
    $('item-hint').textContent = item.hint;

    // Setup buttons (possibly swapped)
    updateZoneButtons(false);

    // Start timer
    timeLeft = 8;
    updateTimerArc(1);
    $('timer-num').textContent = '8';
    timerInt = setInterval(()=>{
      if(Date.now() < frozenUntil) return;
      timeLeft -= .1;
      updateTimerArc(timeLeft/8);
      $('timer-num').textContent = Math.ceil(Math.max(0,timeLeft));
      if(timeLeft<=0){
        clearInterval(timerInt);
        if(!roundAnswered) timeUp(item);
      }
    }, 100);
  }, 2000);
}

function showTransition(roundIdx){
  const ov = $('transition-overlay');
  $('trans-round').textContent = `‡∏Ç‡πâ‡∏≠ ${roundIdx+1}`;
  // countdown 2‚Üí1
  $('trans-count').textContent = '2';
  ov.classList.add('show');
  let c = 2;
  const ci = setInterval(()=>{
    c--;
    if(c<=0){ clearInterval(ci); return; }
    $('trans-count').textContent = c;
  }, 1000);
}

function hideTransition(){
  $('transition-overlay').classList.remove('show');
}

function updateZoneButtons(swapped){
  const left  = swapped ? 'space' : 'earth';
  const right = swapped ? 'earth' : 'space';
  $('zone-left').dataset.zone  = left;
  $('zone-right').dataset.zone = right;
  $('zone-left').querySelector('.z-title').textContent  = left==='earth'?'üåç TERRA':'üåå COSMOS';
  $('zone-right').querySelector('.z-title').textContent = right==='earth'?'üåç TERRA':'üåå COSMOS';
  $('zone-left').className  = 'zone ' + left;
  $('zone-right').className = 'zone ' + right;
}

function updateTimerArc(pct){
  const offset = 100 - (Math.max(0,pct)*100);
  const arc = $('timer-arc');
  arc.style.strokeDashoffset = offset;
  arc.style.stroke = pct>.5?'rgba(255,255,255,.7)':pct>.25?'#f1c40f':'#e74c3c';
}

async function pickZone(side){
  if(roundAnswered || transitioning) return;
  if(Date.now() < frozenUntil){ showToast('üßä ‡πÇ‡∏î‡∏ô‡∏ü‡∏£‡∏µ‡∏ã!','#4dd9f0',1000); return; }

  // Apply swap
  const actualSide = swappedThisRound ? (side==='earth'?'space':'earth') : side;

  roundAnswered = true;
  clearInterval(timerInt);

  const item = gameQueue[currentRound];
  const correct = actualSide === item.zone;

  if(correct){
    // Speed bonus: faster = more points
    const speedBonus = Math.ceil(timeLeft/2);
    const pts = 10 + speedBonus;
    myScore += pts;
    await update(ref(db,`rooms/${roomCode}/players/${myId}`), {score: myScore});

    const btn = side==='earth' ? $('zone-left') : $('zone-right');
    const r = btn.getBoundingClientRect();
    spawnParticles(r.left+r.width/2, r.top+r.height/2, correct?'#27ae60':'#8e44ad');

    showFeedback(true, item.fact, pts);
    awardPowerUp();
  } else {
    myScore = Math.max(0, myScore-3);
    await update(ref(db,`rooms/${roomCode}/players/${myId}`), {score: myScore});
    showFeedback(false, item.fact, -3);
  }

  // Host advances round after 2.8s
  if(isHost){
    setTimeout(async()=>{
      const next = currentRound+1;
      if(next >= gameQueue.length){
        await update(ref(db,`rooms/${roomCode}`),{status:'ended'});
      } else {
        await update(ref(db,`rooms/${roomCode}`),{round:next, roundStart:Date.now()});
      }
    }, 2800);
  }
}

function timeUp(item){
  roundAnswered = true;
  showFeedback(false, '‚è∞ ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤! ‚Äî '+item.fact, 0);
  if(isHost){
    setTimeout(async()=>{
      const next = currentRound+1;
      if(next >= gameQueue.length){
        await update(ref(db,`rooms/${roomCode}`),{status:'ended'});
      } else {
        await update(ref(db,`rooms/${roomCode}`),{round:next, roundStart:Date.now()});
      }
    },2800);
  }
}

function showFeedback(ok, fact, pts){
  const fb = $('feedback-banner');
  fb.className = 'fb-banner ' + (ok?'ok':'bad');
  fb.innerHTML = ok
    ? `<span>‚úÖ ‡∏ñ‡∏π‡∏Å!</span> <span class="fb-pts">+${pts}</span><div class="fb-fact">${fact}</div>`
    : `<span>‚ùå ‡∏ú‡∏¥‡∏î!</span>${pts!==0?`<span class="fb-pts">${pts}</span>`:''}<div class="fb-fact">${fact}</div>`;
  fb.classList.add('show');
  setTimeout(()=>fb.classList.remove('show'), 2600);
}

function showEffect(msg, color){
  const el = $('effect-alert');
  el.textContent = msg;
  el.style.color = color;
  el.style.borderColor = color;
  el.classList.add('show');
  setTimeout(()=>el.classList.remove('show'),2000);
}

function awardPowerUp(){
  // 40% chance on correct answer
  if(Math.random() < 0.4){
    const pu = POWER_UPS[Math.floor(Math.random()*POWER_UPS.length)];
    myPowerUps[pu.id] = (myPowerUps[pu.id]||0)+1;
    renderPowerUps();
    showToast(`üéÅ ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö ${pu.icon} ${pu.name}!`, pu.color);
  }
}

function renderPowerUps(){
  POWER_UPS.forEach(pu=>{
    const btn = $('pu-'+pu.id);
    if(btn){
      btn.querySelector('.pu-count').textContent = myPowerUps[pu.id]||0;
      btn.disabled = !(myPowerUps[pu.id]>0);
    }
  });
}

// POWER UP: pick target from leaderboard
let pendingPowerUp = null;

async function usePowerUp(puId){
  if(!(myPowerUps[puId]>0)){ showToast('‡πÑ‡∏°‡πà‡∏°‡∏µ power-up ‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß','#e74c3c'); return; }

  // Get players
  const snap = await get(ref(db,`rooms/${roomCode}/players`));
  const players = snap.val()||{};
  const others = Object.entries(players).filter(([id])=>id!==myId);
  if(!others.length){ showToast('‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á','#e74c3c'); return; }

  // Show target picker
  pendingPowerUp = puId;
  const picker = $('target-picker');
  const list = $('target-list');
  list.innerHTML='';
  others.forEach(([id,p])=>{
    const btn = document.createElement('button');
    btn.className='target-btn';
    btn.innerHTML=`${getAvatar(id)} ${p.name}`;
    btn.onclick=()=>applyPowerUp(puId, id, p.name);
    list.appendChild(btn);
  });
  picker.classList.add('show');
}

async function applyPowerUp(puId, targetId, targetName){
  $('target-picker').classList.remove('show');
  myPowerUps[puId]--;
  renderPowerUps();

  const pu = POWER_UPS.find(p=>p.id===puId);
  let effect = {};

  if(puId==='freeze')  effect = {freeze: Date.now()+3000};
  if(puId==='swap')    effect = {swap: true};
  if(puId==='blind')   effect = {blind: true};

  await update(ref(db,`rooms/${roomCode}/players/${targetId}/effects`), effect);
  showToast(`${pu.icon} ‡πÉ‡∏ä‡πâ ${pu.name} ‡∏Å‡∏±‡∏ö ${targetName}!`, pu.color);
}

// ‚îÄ‚îÄ‚îÄ LEADERBOARD ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function updateLeaderboard(players){
  const sorted = Object.entries(players).sort((a,b)=>b[1].score-a[1].score);
  const board = $('leaderboard');
  board.innerHTML='';
  sorted.forEach(([id,p],i)=>{
    const div=document.createElement('div');
    div.className='lb-row'+(id===myId?' me':'');
    div.innerHTML=`
      <span class="lb-rank">${['ü•á','ü•à','ü•â'][i]||'#'+(i+1)}</span>
      <span class="lb-name">${getAvatar(id)} ${p.name}</span>
      <span class="lb-score">${p.score||0}</span>
    `;
    board.appendChild(div);
  });

  // Update my score display
  $('my-score').textContent = players[myId]?.score || 0;
}

// ‚îÄ‚îÄ‚îÄ RESULT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
async function showResult(){
  clearInterval(timerInt);
  setScreen('result');

  const snap = await get(ref(db,`rooms/${roomCode}/players`));
  const players = snap.val()||{};
  const sorted = Object.entries(players).sort((a,b)=>b[1].score-a[1].score);

  const podium=$('podium');
  podium.innerHTML='';
  sorted.slice(0,3).forEach(([id,p],i)=>{
    const div=document.createElement('div');
    div.className='podium-card'+(id===myId?' me':'');
    div.innerHTML=`
      <div class="pod-rank">${['ü•á','ü•à','ü•â'][i]}</div>
      <div class="pod-avatar">${getAvatar(id)}</div>
      <div class="pod-name">${p.name}</div>
      <div class="pod-score">${p.score||0}</div>
    `;
    podium.appendChild(div);
  });

  const winner = sorted[0];
  if(winner && winner[0]===myId){
    $('result-msg').textContent = 'üèÜ ‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏ô‡∏∞! ‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å!';
    startConfetti();
  } else {
    $('result-msg').textContent = `ü•á ${winner[1].name} ‡∏ä‡∏ô‡∏∞! ${winner[1].score} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô`;
  }
}

function startConfetti(){
  const colors=['#f1c40f','#27ae60','#8e44ad','#4dd9f0','#e74c3c','#fff'];
  confettiInterval = setInterval(()=>{
    for(let i=0;i<6;i++){
      const p=document.createElement('div');
      p.className='confetti';
      p.style.cssText=`left:${Math.random()*100}vw;
        background:${colors[Math.floor(Math.random()*colors.length)]};
        animation-duration:${1.5+Math.random()*2}s;
        animation-delay:${Math.random()*.5}s;`;
      document.body.appendChild(p);
      setTimeout(()=>p.remove(),3000);
    }
  },200);
  setTimeout(()=>clearInterval(confettiInterval),5000);
}

async function leaveRoom(){
  clearInterval(timerInt);
  clearInterval(confettiInterval);
  stopListeners();
  await remove(ref(db,`rooms/${roomCode}/players/${myId}`));
  // If host, clean up room
  if(isHost) await remove(ref(db,`rooms/${roomCode}`));
  myScore=0; myPowerUps={freeze:1,swap:1,blind:1};
  setScreen('home');
}

// ‚îÄ‚îÄ‚îÄ KEYBOARD ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
document.addEventListener('keydown',e=>{
  if(e.key==='ArrowLeft')  pickZone('earth');
  if(e.key==='ArrowRight') pickZone('space');
});

// Expose to global
window.createRoom=createRoom; window.joinRoom=joinRoom; window.startGame=startGame;
window.pickZone=pickZone; window.usePowerUp=usePowerUp; window.leaveRoom=leaveRoom;
window.closePicker=()=>$('target-picker').classList.remove('show');
</script>

<style>
*{box-sizing:border-box;margin:0;padding:0}
:root{
  --earth:#27ae60;--earth-d:rgba(39,174,96,.15);--earth-g:rgba(39,174,96,.35);
  --space:#8e44ad;--space-d:rgba(142,68,173,.15);--space-g:rgba(142,68,173,.35);
  --gold:#f1c40f;--bg:#08080f;--white:#eef2ff;--dim:rgba(238,242,255,.45);
  --card:rgba(255,255,255,.05);--border:rgba(255,255,255,.1);
}
body{font-family:'Mitr',sans-serif;background:var(--bg);color:var(--white);
  min-height:100vh;display:flex;align-items:center;justify-content:center;
  overflow:hidden;position:relative}
#stars{position:fixed;inset:0;z-index:0;pointer-events:none}

/* ‚îÄ‚îÄ SCREENS ‚îÄ‚îÄ */
.screen{position:fixed;inset:0;z-index:10;display:none;flex-direction:column;
  align-items:center;justify-content:center;padding:16px;overflow-y:auto}
.screen.active{display:flex}

/* ‚îÄ‚îÄ HOME ‚îÄ‚îÄ */
#screen-home{
  background:radial-gradient(ellipse at 20% 30%,rgba(39,174,96,.15),transparent 50%),
             radial-gradient(ellipse at 80% 70%,rgba(142,68,173,.15),transparent 50%),
             var(--bg);
}
.home-logo{font-family:'Bebas Neue',cursive;font-size:13px;letter-spacing:5px;
  color:var(--dim);margin-bottom:12px;text-align:center}
.home-title{font-family:'Bebas Neue',cursive;font-size:min(52px,12vw);
  letter-spacing:4px;line-height:1;text-align:center;margin-bottom:6px}
.t-earth{color:var(--earth);text-shadow:0 0 30px var(--earth-g)}
.t-space{color:var(--space);text-shadow:0 0 30px var(--space-g)}
.home-sub{font-size:13px;color:var(--dim);text-align:center;margin-bottom:24px;line-height:1.6}

.card-box{background:var(--card);border:1px solid var(--border);border-radius:20px;
  padding:20px;width:100%;max-width:380px;margin-bottom:12px;backdrop-filter:blur(12px)}
.card-box h3{font-family:'Bebas Neue',cursive;font-size:16px;letter-spacing:2px;
  color:var(--dim);margin-bottom:12px;text-align:center}
.inp{width:100%;background:rgba(255,255,255,.07);border:1px solid var(--border);
  border-radius:10px;padding:11px 14px;color:var(--white);font-family:'Mitr',sans-serif;
  font-size:14px;margin-bottom:10px;outline:none;transition:border-color .2s}
.inp:focus{border-color:rgba(255,255,255,.3)}
.inp-row{display:flex;gap:8px}
.inp-row .inp{margin-bottom:0}
.btn{font-family:'Bebas Neue',cursive;font-size:15px;letter-spacing:2px;
  padding:11px 24px;border:none;border-radius:10px;cursor:pointer;
  transition:transform .15s,box-shadow .15s;white-space:nowrap}
.btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(0,0,0,.4)}
.btn.primary{background:linear-gradient(135deg,var(--earth),#1a5c35);color:#fff}
.btn.secondary{background:linear-gradient(135deg,var(--space),#5a1e7a);color:#fff}
.btn.ghost{background:rgba(255,255,255,.08);border:1px solid var(--border);color:var(--white)}
.btn.full{width:100%}
.btn.sm{font-size:13px;padding:8px 16px}
.btn:disabled{opacity:.4;cursor:default;transform:none!important}

/* ‚îÄ‚îÄ LOBBY ‚îÄ‚îÄ */
#screen-lobby{background:var(--bg)}
.lobby-wrap{width:100%;max-width:420px;text-align:center}
.lobby-code{font-family:'Bebas Neue',cursive;font-size:58px;letter-spacing:8px;
  color:var(--gold);text-shadow:0 0 20px rgba(241,196,15,.4);line-height:1;margin:8px 0}
.lobby-label{font-size:12px;color:var(--dim);letter-spacing:2px;margin-bottom:20px}
.player-list{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin-bottom:20px}
.player-chip{background:var(--card);border:1px solid var(--border);border-radius:30px;
  padding:8px 16px;font-size:13px;display:flex;align-items:center;gap:6px}
.player-chip.me{border-color:var(--gold);color:var(--gold)}
.pchip-emoji{font-size:18px}

/* ‚îÄ‚îÄ GAME ‚îÄ‚îÄ */
#screen-game{background:var(--bg);padding:10px;justify-content:flex-start;gap:0}
.game-wrap{width:100%;max-width:640px;display:flex;flex-direction:column;gap:8px;
  height:100%;max-height:680px}

/* Top bar */
.top-bar{display:flex;align-items:center;justify-content:space-between;flex-shrink:0}
.top-left{display:flex;align-items:center;gap:8px}
.round-badge{font-family:'Bebas Neue',cursive;font-size:13px;letter-spacing:1px;
  color:var(--dim);padding:4px 10px;background:var(--card);border-radius:20px;
  border:1px solid var(--border)}
.score-badge{font-family:'Bebas Neue',cursive;font-size:18px;color:var(--gold);
  padding:4px 12px;background:rgba(241,196,15,.1);border-radius:20px;
  border:1px solid rgba(241,196,15,.3)}

/* Leaderboard mini */
.lb-wrap{background:var(--card);border:1px solid var(--border);border-radius:14px;
  padding:8px 12px;flex-shrink:0}
.lb-row{display:flex;align-items:center;gap:6px;padding:3px 0;font-size:12px}
.lb-row.me{color:var(--gold)}
.lb-rank{width:24px;text-align:center;font-size:14px}
.lb-name{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.lb-score{font-family:'Bebas Neue',cursive;font-size:15px;color:var(--gold)}

/* Question card */
.q-card{background:var(--card);border:1px solid var(--border);border-radius:20px;
  padding:16px 20px 12px;text-align:center;position:relative;overflow:hidden;
  flex-shrink:0;backdrop-filter:blur(10px)}
.q-timer-ring{position:absolute;top:10px;right:12px;width:34px;height:34px}
.q-timer-ring svg{transform:rotate(-90deg)}
#timer-num{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;
  font-family:'Bebas Neue',cursive;font-size:12px;color:rgba(255,255,255,.6)}
#item-icon{font-size:46px;display:block;margin-bottom:6px;
  animation:iconFloat 2.5s ease-in-out infinite}
@keyframes iconFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
#item-name{font-family:'Bebas Neue',cursive;font-size:28px;letter-spacing:2px;
  line-height:1.1;margin-bottom:4px}
#item-hint{font-size:11px;color:var(--dim);font-weight:300}

/* Zones */
.zones{display:grid;grid-template-columns:1fr 1fr;gap:10px;flex-shrink:0}
.zone{border-radius:16px;padding:14px 12px;display:flex;flex-direction:column;
  align-items:center;gap:4px;cursor:pointer;border:2px solid;transition:all .15s;
  min-height:72px;justify-content:center;position:relative;overflow:hidden}
.zone.earth{background:var(--earth-d);border-color:rgba(39,174,96,.4)}
.zone.space{background:var(--space-d);border-color:rgba(142,68,173,.4)}
.zone.earth:hover{border-color:var(--earth);box-shadow:0 0 24px var(--earth-g)}
.zone.space:hover{border-color:var(--space);box-shadow:0 0 24px var(--space-g)}
.z-icon{font-size:26px}
.z-title{font-family:'Bebas Neue',cursive;font-size:18px;letter-spacing:1px}
.zone.earth .z-title{color:var(--earth)}
.zone.space .z-title{color:var(--space)}
.zone.pulse-ok{animation:pulseOk .5s ease}
.zone.pulse-bad{animation:pulseBad .5s ease}
@keyframes pulseOk{0%{transform:scale(1)}40%{transform:scale(1.06)}100%{transform:scale(1)}}
@keyframes pulseBad{0%,100%{transform:translateX(0)}25%{transform:translateX(-6px)}75%{transform:translateX(6px)}}

/* Power-ups */
.pu-row{display:flex;gap:6px;justify-content:center;flex-shrink:0}
.pu-btn{background:rgba(255,255,255,.06);border:1px solid var(--border);
  border-radius:12px;padding:8px 12px;cursor:pointer;transition:all .15s;
  display:flex;flex-direction:column;align-items:center;gap:2px;flex:1;max-width:90px}
.pu-btn:hover:not(:disabled){transform:translateY(-2px);background:rgba(255,255,255,.1)}
.pu-btn:disabled{opacity:.35;cursor:default}
.pu-icon{font-size:20px}
.pu-label{font-size:10px;color:var(--dim);font-weight:300}
.pu-count{font-family:'Bebas Neue',cursive;font-size:14px;color:var(--gold)}

/* Feedback banner */
.fb-banner{position:fixed;bottom:-80px;left:50%;transform:translateX(-50%);
  background:rgba(10,10,20,.95);border:1.5px solid;border-radius:16px;
  padding:12px 20px;text-align:center;z-index:200;min-width:260px;max-width:360px;
  backdrop-filter:blur(16px);transition:bottom .25s ease;pointer-events:none}
.fb-banner.show{bottom:20px}
.fb-banner.ok{border-color:#27ae60;color:#2ecc71}
.fb-banner.bad{border-color:#e74c3c;color:#e74c3c}
.fb-pts{font-family:'Bebas Neue',cursive;font-size:20px;margin-left:8px}
.fb-fact{font-size:12px;color:var(--dim);margin-top:4px;font-weight:300;line-height:1.5}

/* Effect alert */
#effect-alert{position:fixed;top:70px;left:50%;transform:translateX(-50%) scale(0);
  background:rgba(0,0,0,.9);border:1.5px solid;border-radius:12px;
  padding:10px 20px;font-size:14px;font-weight:600;z-index:300;
  backdrop-filter:blur(12px);transition:transform .2s cubic-bezier(.175,.885,.32,1.275)}
#effect-alert.show{transform:translateX(-50%) scale(1)}

/* Target picker */
#target-picker{position:fixed;inset:0;z-index:400;background:rgba(0,0,0,.75);
  display:none;flex-direction:column;align-items:center;justify-content:center;padding:20px}
#target-picker.show{display:flex}
.picker-card{background:#111;border:1px solid var(--border);border-radius:20px;
  padding:24px;width:100%;max-width:320px;text-align:center}
.picker-card h3{font-family:'Bebas Neue',cursive;font-size:18px;letter-spacing:2px;
  margin-bottom:16px;color:var(--gold)}
#target-list{display:flex;flex-direction:column;gap:8px;margin-bottom:16px}
.target-btn{background:var(--card);border:1px solid var(--border);border-radius:10px;
  padding:12px;color:var(--white);font-family:'Mitr',sans-serif;font-size:14px;
  cursor:pointer;transition:all .15s}
.target-btn:hover{background:rgba(255,255,255,.12);border-color:rgba(255,255,255,.3)}

/* Key hint */
.key-hint{font-size:11px;color:var(--dim);text-align:center;flex-shrink:0;
  display:flex;gap:10px;justify-content:center;align-items:center}
.kb{background:rgba(255,255,255,.07);border:1px solid var(--border);
  border-radius:5px;padding:2px 8px;font-family:'Bebas Neue',cursive;
  font-size:12px;letter-spacing:1px}

/* ‚îÄ‚îÄ RESULT ‚îÄ‚îÄ */
#screen-result{background:var(--bg)}
.result-wrap{width:100%;max-width:460px;text-align:center}
.result-title{font-family:'Bebas Neue',cursive;font-size:40px;letter-spacing:4px;
  background:linear-gradient(90deg,var(--earth),var(--space));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
  margin-bottom:6px}
#result-msg{font-size:15px;color:var(--dim);margin-bottom:20px}
.podium{display:flex;gap:12px;justify-content:center;margin-bottom:24px;align-items:flex-end}
.podium-card{background:var(--card);border:1px solid var(--border);border-radius:14px;
  padding:14px 16px;text-align:center;flex:1;max-width:130px}
.podium-card.me{border-color:var(--gold);box-shadow:0 0 20px rgba(241,196,15,.2)}
.pod-rank{font-size:28px;margin-bottom:4px}
.pod-avatar{font-size:28px;margin-bottom:4px}
.pod-name{font-size:13px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-bottom:4px}
.pod-score{font-family:'Bebas Neue',cursive;font-size:22px;color:var(--gold)}

/* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
#toast{position:fixed;top:20px;left:50%;transform:translateX(-50%) translateY(-80px);
  background:rgba(10,10,20,.92);border:1px solid var(--border);border-radius:30px;
  padding:8px 20px;font-size:13px;z-index:500;backdrop-filter:blur(12px);
  transition:transform .3s ease;pointer-events:none;white-space:nowrap}
#toast.show{transform:translateX(-50%) translateY(0)}

/* ‚îÄ‚îÄ CONFETTI ‚îÄ‚îÄ */
.confetti{position:fixed;top:-10px;width:8px;height:8px;border-radius:2px;
  animation:confettiFall linear forwards;z-index:999;pointer-events:none}
@keyframes confettiFall{to{top:110vh;transform:rotate(720deg) translateX(50px)}}

/* ‚îÄ‚îÄ PARTICLES ‚îÄ‚îÄ */
.particle{position:fixed;border-radius:50%;pointer-events:none;z-index:100;
  animation:ptFly .8s ease-out forwards;transform:translate(-50%,-50%)}
@keyframes ptFly{0%{opacity:1;transform:translate(-50%,-50%) scale(1)}
  100%{opacity:0;transform:translate(calc(-50% + var(--tx)),calc(-50% + var(--ty))) scale(0)}}
/* ‚îÄ‚îÄ TRANSITION OVERLAY ‚îÄ‚îÄ */
#transition-overlay{
  position:fixed;inset:0;z-index:350;
  background:rgba(5,5,15,0.92);
  backdrop-filter:blur(16px);
  display:flex;align-items:center;justify-content:center;
  opacity:0;pointer-events:none;
  transition:opacity .3s ease;
}
#transition-overlay.show{
  opacity:1;pointer-events:all;
}
.trans-inner{
  text-align:center;
  animation:transIn .3s cubic-bezier(.175,.885,.32,1.275);
}
@keyframes transIn{from{transform:scale(.85);opacity:0}to{transform:scale(1);opacity:1}}
.trans-label{
  font-size:13px;color:var(--dim);letter-spacing:3px;
  font-family:'Bebas Neue',cursive;margin-bottom:12px;
}
.trans-round{
  font-family:'Bebas Neue',cursive;font-size:18px;
  color:var(--gold);letter-spacing:2px;margin-bottom:8px;
}
.trans-count{
  font-family:'Bebas Neue',cursive;
  font-size:96px;line-height:1;
  background:linear-gradient(135deg,var(--earth),var(--space));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
  animation:countPulse 1s ease-in-out infinite;
  margin-bottom:16px;
}
@keyframes countPulse{0%,100%{transform:scale(1)}50%{transform:scale(1.08)}}
.trans-bar-wrap{
  width:200px;height:5px;background:rgba(255,255,255,.1);
  border-radius:3px;overflow:hidden;margin:0 auto 14px;
}
.trans-bar{
  height:100%;width:100%;
  background:linear-gradient(90deg,var(--earth),var(--space));
  border-radius:3px;
  animation:transBarShrink 2s linear forwards;
}
@keyframes transBarShrink{from{width:100%}to{width:0%}}
.trans-lock{
  font-size:14px;font-weight:600;
  color:rgba(255,255,255,.5);
  border:1px solid rgba(255,255,255,.15);
  border-radius:30px;padding:6px 18px;
  display:inline-block;letter-spacing:1px;
}

</style>

<body>
<canvas id="stars"></canvas>
<div id="toast"></div>
<div id="effect-alert"></div>

<!-- HOME -->

<div id="screen-home" class="screen active">
  <div class="home-logo">MULTIPLAYER SCIENCE QUIZ</div>
  <h1 class="home-title"><span class="t-earth">TERRA</span> <span style="opacity:.3">√ó</span> <span class="t-space">COSMOS</span></h1>
  <p class="home-sub">‡πÅ‡∏Ç‡πà‡∏á‡πÅ‡∏ö‡∏ö real-time ¬∑ ‡πÉ‡∏ä‡πâ power-up ‡∏Å‡∏ß‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô ¬∑ ‡∏ï‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡πÄ‡∏£‡πá‡∏ß‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°</p>

  <div class="card-box">
    <h3>‚å®Ô∏è ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</h3>
    <input class="inp" id="inp-name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" maxlength="16">

```
<h3 style="margin-top:4px">üè† ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á</h3>
<button class="btn primary full" onclick="createRoom()">+ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà</button>

<h3 style="margin-top:14px">üö™ ‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡πâ‡∏≠‡∏á</h3>
<div class="inp-row">
  <input class="inp" id="inp-code" placeholder="‡∏£‡∏´‡∏±‡∏™ 4 ‡∏´‡∏•‡∏±‡∏Å" maxlength="4" inputmode="numeric">
  <button class="btn secondary" onclick="joinRoom()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°</button>
</div>
```

  </div>
</div>

<!-- LOBBY -->

<div id="screen-lobby" class="screen">
  <div class="lobby-wrap">
    <div style="font-size:13px;color:var(--dim);letter-spacing:3px;margin-bottom:8px">‡∏£‡∏´‡∏±‡∏™‡∏´‡πâ‡∏≠‡∏á</div>
    <div class="lobby-code" id="room-code-display">----</div>
    <div class="lobby-label">‡πÅ‡∏ä‡∏£‡πå‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô</div>
    <div class="player-list" id="player-list"></div>
    <button class="btn primary full" id="start-btn" onclick="startGame()" style="display:none;margin-bottom:10px">
      üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏° (‡πÄ‡∏â‡∏û‡∏≤‡∏∞ host)
    </button>
    <button class="btn ghost sm" onclick="leaveRoom()">‚Üê ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏´‡πâ‡∏≠‡∏á</button>
  </div>
</div>

<!-- GAME -->

<div id="screen-game" class="screen">
  <div class="game-wrap">
    <!-- Top bar -->
    <div class="top-bar">
      <div class="top-left">
        <div class="round-badge">ROUND <span id="round-num">1/15</span></div>
        <div class="score-badge">‚≠ê <span id="my-score">0</span></div>
      </div>
      <button class="btn ghost sm" onclick="leaveRoom()" style="padding:6px 12px;font-size:12px">‚úï ‡∏≠‡∏≠‡∏Å</button>
    </div>

```
<!-- Leaderboard -->
<div class="lb-wrap" id="leaderboard"></div>

<!-- Question card -->
<div class="q-card">
  <div class="q-timer-ring" id="timer-ring">
    <svg viewBox="0 0 34 34" width="34" height="34">
      <circle id="timer-track" cx="17" cy="17" r="14" fill="none" stroke="rgba(255,255,255,.08)" stroke-width="3"/>
      <circle id="timer-arc" cx="17" cy="17" r="14" fill="none" stroke="white" stroke-width="3"
        stroke-linecap="round" stroke-dasharray="88" stroke-dashoffset="0"/>
    </svg>
    <div id="timer-num">8</div>
  </div>
  <span id="item-icon">üåÄ</span>
  <div id="item-name">‚Äî</div>
  <div id="item-hint">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
</div>

<!-- Zones -->
<div class="zones">
  <div class="zone earth" id="zone-left" data-zone="earth" onclick="pickZone(this.dataset.zone)">
    <div class="z-icon">üåç</div>
    <div class="z-title">üåç TERRA</div>
  </div>
  <div class="zone space" id="zone-right" data-zone="space" onclick="pickZone(this.dataset.zone)">
    <div class="z-icon">üåå</div>
    <div class="z-title">üåå COSMOS</div>
  </div>
</div>

<!-- Power-ups -->
<div class="pu-row">
  <button class="pu-btn" id="pu-freeze" onclick="usePowerUp('freeze')">
    <div class="pu-icon">üßä</div>
    <div class="pu-label">‡∏ü‡∏£‡∏µ‡∏ã</div>
    <div class="pu-count">1</div>
  </button>
  <button class="pu-btn" id="pu-swap" onclick="usePowerUp('swap')">
    <div class="pu-icon">üîÑ</div>
    <div class="pu-label">‡∏™‡∏•‡∏±‡∏ö</div>
    <div class="pu-count">1</div>
  </button>
  <button class="pu-btn" id="pu-blind" onclick="usePowerUp('blind')">
    <div class="pu-icon">üëÅÔ∏è</div>
    <div class="pu-label">‡∏ö‡∏≠‡∏î</div>
    <div class="pu-count">1</div>
  </button>
</div>

<!-- Key hint -->
<div class="key-hint">
  <span><span class="kb">‚Üê</span> TERRA</span>
  <span style="opacity:.4">|</span>
  <span>COSMOS <span class="kb">‚Üí</span></span>
</div>
```

  </div>
</div>

<!-- RESULT -->

<div id="screen-result" class="screen">
  <div class="result-wrap">
    <div class="result-title">MISSION COMPLETE</div>
    <div id="result-msg"></div>
    <div class="podium" id="podium"></div>
    <button class="btn primary" onclick="leaveRoom()">üè† ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
  </div>
</div>

<!-- Target picker -->

<div id="target-picker">
  <div class="picker-card">
    <h3>üéØ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</h3>
    <div id="target-list"></div>
    <button class="btn ghost full" onclick="closePicker()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
  </div>
</div>

<!-- Feedback banner -->

<div class="fb-banner" id="feedback-banner"></div>

<!-- Transition overlay -->

<div id="transition-overlay">
  <div class="trans-inner">
    <div class="trans-label">‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°...</div>
    <div class="trans-round" id="trans-round">‡∏Ç‡πâ‡∏≠ 2</div>
    <div class="trans-count" id="trans-count">2</div>
    <div class="trans-bar-wrap"><div class="trans-bar" id="trans-bar"></div></div>
    <div class="trans-lock">üîí ‡∏£‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞ ‡∏´‡πâ‡∏≤‡∏°‡∏ï‡∏≠‡∏ö!</div>
  </div>
</div>

</body>
</html>
